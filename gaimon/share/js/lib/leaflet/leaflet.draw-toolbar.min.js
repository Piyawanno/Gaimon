!function(o,t,a){"use strict";L.Toolbar2.DrawAction={fromHandler:function(o,t,a){return L.Toolbar2.Action.extend({options:{toolbarIcon:L.extend({},L.Toolbar2.Action.prototype.options.toolbarIcon,t),subToolbar:a||L.Toolbar2.Action.prototype.options.subToolbar},initialize:function(t,a){var i=this;this._handler=new o(t,a),this._handler.on("disabled",function(){i.disable()}),L.Toolbar2.Action.prototype.initialize.call(this,a)},enable:function(o){this._handler.enable(),L.Toolbar2.Action.prototype.enable.call(this,o)},disable:function(){this._handler.disable(),L.Toolbar2.Action.prototype.disable.call(this)},setOptions:function(o){this._handler.setOptions(o),L.Toolbar2.Action.prototype.setOptions.call(this,o)}})}},L.Toolbar2.DrawAction.Cancel=L.Toolbar2.Action.extend({options:{toolbarIcon:{html:"Cancel"}},initialize:function(o,t){this.drawing=t,L.Toolbar2.Action.prototype.initialize.call(this)},addHooks:function(){this.drawing.disable(),this.disable()}}),L.Toolbar2.DrawAction.RemoveLastPoint=L.Toolbar2.Action.extend({options:{toolbarIcon:{html:L.drawLocal.draw.toolbar.undo.text}},initialize:function(o,t){this.drawing=t,L.Toolbar2.Action.prototype.initialize.call(this)},addHooks:function(){this.drawing.deleteLastVertex(),this.disable()}}),L.Toolbar2.DrawAction.Circle=L.Toolbar2.DrawAction.fromHandler(L.Draw.Circle,{className:"leaflet-draw-draw-circle",tooltip:L.drawLocal.draw.toolbar.buttons.circle},new L.Toolbar2({actions:[L.Toolbar2.DrawAction.Cancel]})),L.Toolbar2.DrawAction.Marker=L.Toolbar2.DrawAction.fromHandler(L.Draw.Marker,{className:"leaflet-draw-draw-marker",tooltip:L.drawLocal.draw.toolbar.buttons.marker},new L.Toolbar2({actions:[L.Toolbar2.DrawAction.Cancel]})),L.Toolbar2.DrawAction.Polygon=L.Toolbar2.DrawAction.fromHandler(L.Draw.Polygon,{className:"leaflet-draw-draw-polygon",tooltip:L.drawLocal.draw.toolbar.buttons.polygon},new L.Toolbar2({actions:[L.Toolbar2.DrawAction.Cancel,L.Toolbar2.DrawAction.RemoveLastPoint]})),L.Toolbar2.DrawAction.Polygon.prototype.deleteLastVertex=function(){this._handler.deleteLastVertex()},L.Toolbar2.DrawAction.Polyline=L.Toolbar2.DrawAction.fromHandler(L.Draw.Polyline,{className:"leaflet-draw-draw-polyline",tooltip:L.drawLocal.draw.toolbar.buttons.polyline},new L.Toolbar2({actions:[L.Toolbar2.DrawAction.Cancel,L.Toolbar2.DrawAction.RemoveLastPoint]})),L.Toolbar2.DrawAction.Polyline.prototype.deleteLastVertex=function(){this._handler.deleteLastVertex()},L.Toolbar2.DrawAction.Rectangle=L.Toolbar2.DrawAction.fromHandler(L.Draw.Rectangle,{className:"leaflet-draw-draw-rectangle",tooltip:L.drawLocal.draw.toolbar.buttons.rectangle},new L.Toolbar2({actions:[L.Toolbar2.DrawAction.Cancel]})),L.Toolbar2.DrawToolbar=L.Toolbar2.Control.extend({options:{actions:[L.Toolbar2.DrawAction.Polygon,L.Toolbar2.DrawAction.Polyline,L.Toolbar2.DrawAction.Marker,L.Toolbar2.DrawAction.Rectangle,L.Toolbar2.DrawAction.Circle],className:"leaflet-draw-toolbar"}}),L.Toolbar2.EditToolbar={},L.Toolbar2.EditAction={fromHandler:function(o,t,a){return L.Toolbar2.Action.extend({options:{toolbarIcon:L.extend({},L.Toolbar2.Action.prototype.options.toolbarIcon,t),subToolbar:a||L.Toolbar2.Action.prototype.options.subToolbar},initialize:function(t,a,i){var n=this;(i=i||{}).featureGroup=a,this._handler=new o(t,i),this._handler.on("disabled",function(){n.disable()}),L.Toolbar2.Action.prototype.initialize.call(this,i)},enable:function(o){this._handler.enable(),L.Toolbar2.Action.prototype.enable.call(this,o)},disable:function(){this._handler.disable(),L.Toolbar2.Action.prototype.disable.call(this)},setOptions:function(o){this._handler.setOptions(o),L.Toolbar2.Action.prototype.setOptions.call(this,o)},revertLayers:function(){this._handler.revertLayers()},save:function(){this._handler.save()}})}},L.Toolbar2.EditAction.Control={},L.Toolbar2.EditAction.Control.Save=L.Toolbar2.Action.extend({options:{toolbarIcon:{html:"Save"}},initialize:function(o,t,a){this.editing=a,L.Toolbar2.Action.prototype.initialize.call(this)},addHooks:function(){this.editing.save(),this.editing.disable()}}),L.Toolbar2.EditAction.Control.Undo=L.Toolbar2.Action.extend({options:{toolbarIcon:{html:"Undo"}},initialize:function(o,t,a){this.editing=a,L.Toolbar2.Action.prototype.initialize.call(this)},addHooks:function(){this.editing.revertLayers(),this.editing.disable()}}),L.Toolbar2.EditAction.Control.Edit=L.Toolbar2.EditAction.fromHandler(L.EditToolbar.Edit,{className:"leaflet-draw-edit-edit",tooltip:"Edit features"},new L.Toolbar2({actions:[L.Toolbar2.EditAction.Control.Save,L.Toolbar2.EditAction.Control.Undo]})),L.Toolbar2.EditAction.Control.Delete=L.Toolbar2.EditAction.fromHandler(L.EditToolbar.Delete,{className:"leaflet-draw-edit-remove",tooltip:"Remove features"},new L.Toolbar2({actions:[L.Toolbar2.EditAction.Control.Save,L.Toolbar2.EditAction.Control.Undo]})),L.Toolbar2.EditToolbar.Control=L.Toolbar2.Control.extend({options:{actions:[L.Toolbar2.EditAction.Control.Edit,L.Toolbar2.EditAction.Control.Delete],className:"leaflet-draw-toolbar"}}),L.Toolbar2.EditAction.Popup={},L.Toolbar2.EditAction.Popup.Edit=L.Toolbar2.Action.extend({options:{toolbarIcon:{className:"leaflet-draw-edit-edit"}},initialize:function(o,t,a){this._map=o,this._shape=t,this._shape.options.editing=this._shape.options.editing||{},L.Toolbar2.Action.prototype.initialize.call(this,o,a)},enable:function(){var o=this._map,t=this._shape;t.editing.enable(),o.removeLayer(this.toolbar),o.on("click",function(){this.save(),t.editing.disable()},this)},save:function(){var o=this._map,t=this._shape;t.edited&&o.fire(L.Draw.Event.EDITED,{layers:L.layerGroup([t])}),t.edited=!1}}),L.Toolbar2.EditAction.Popup.Delete=L.Toolbar2.Action.extend({options:{toolbarIcon:{className:"leaflet-draw-edit-remove"}},initialize:function(o,t,a){this._map=o,this._shape=t,L.Toolbar2.Action.prototype.initialize.call(this,o,a)},addHooks:function(){var o=this._map;o.removeLayer(this._shape),o.removeLayer(this.toolbar),console.log("firing draw:deleted"),o.fire(L.Draw.Event.DELETED,{layers:L.layerGroup([this._shape])})}}),L.Toolbar2.EditToolbar.Popup=L.Toolbar2.Popup.extend({options:{actions:[L.Toolbar2.EditAction.Popup.Edit,L.Toolbar2.EditAction.Popup.Delete],className:"leaflet-draw-toolbar"},onAdd:function(o){var t=this._arguments[1];t instanceof L.Marker&&(this.options.anchor=L.point(t.options.icon.options.popupAnchor)),L.Toolbar2.Popup.prototype.onAdd.call(this,o)}})}(window,document);